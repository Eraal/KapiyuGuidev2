{% extends "student/student_base.html" %} {% block title %}{{ office.name }} -
Office Details{% endblock %} {% block content %}
<div class="container mx-auto px-4 py-8">
  <!-- Back button -->
  <div class="mb-6">
    <a
      href="{{ url_for('student.university_offices') }}"
      class="inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors"
    >
      <i class="fas fa-arrow-left mr-2"></i> Back to University Offices
    </a>
  </div>

  <div class="bg-white rounded-xl shadow-md overflow-hidden">
    <div class="p-8">
      <!-- Office Header -->
      <div
        class="flex flex-col md:flex-row md:items-center justify-between mb-8"
      >
        <div class="flex items-center mb-4 md:mb-0">
          <div class="bg-blue-100 p-4 rounded-xl mr-4">
            <i class="fas fa-building text-blue-600 text-3xl"></i>
          </div>
          <div>
            <h1 class="text-2xl font-bold text-gray-900">{{ office.name }}</h1>
          </div>
        </div>

        <div class="flex space-x-3">
          {% if office.supports_video %}
          <a
            href="{{ url_for('student.request_counseling_session') }}?office_id={{ office.id }}"
            class="inline-flex items-center justify-center px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
          >
            <i class="fas fa-calendar-plus mr-2"></i>
            Schedule Appointment
          </a>
          {% endif %}

          <a
            href="{{ url_for('student.submit_inquiry', office_id=office.id) }}"
            class="inline-flex items-center justify-center px-5 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition"
          >
            <i class="fas fa-paper-plane mr-2"></i>
            Send Inquiry
          </a>
        </div>
      </div>

      <!-- Office Features -->
      <div class="flex flex-wrap gap-3 mb-6">
        <!-- Always show Inquiry as a feature -->
        <span
          class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800"
        >
          <i class="fas fa-paper-plane mr-1"></i> Inquiry
        </span>

        {% if office.supports_video %}
        <span
          class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800"
        >
          <i class="fas fa-calendar-check mr-1"></i> Counseling
        </span>

        <span
          class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"
        >
          <i class="fas fa-video mr-1"></i> Video
        </span>
        {% endif %}
      </div>

      <!-- Office Main Content -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="lg:col-span-2">
          <!-- Office Description -->
          <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">
              About this Office
            </h2>
            <div class="prose max-w-none text-gray-600">
              {% if office.description %}
              <p>{{ office.description }}</p>
              {% else %}
              <p class="text-gray-500">
                No description available for this office.
              </p>
              {% endif %}
            </div>
          </div>

          <!-- Services & Concerns -->
          <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">
              Services & Concerns
            </h2>

            {% if office.supported_concerns %}
            <div class="bg-white rounded-lg border border-gray-200 p-4">
              <ul class="space-y-2">
                {% for concern in office.supported_concerns %}
                <li class="flex items-start">
                  <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                  <div>
                    <h4 class="font-medium text-gray-900">
                      {{ concern.concern_type.name }}
                    </h4>
                    <p class="text-sm text-gray-600">
                      {{ concern.concern_type.description }}
                    </p>
                  </div>
                </li>
                {% endfor %}
              </ul>
            </div>
            {% else %}
            <div class="text-gray-500 text-sm italic">
              No specific services or concerns have been listed for this office.
            </div>
            {% endif %}
          </div>

          <!-- Video Counseling Section (if applicable) -->
          {% if office.supports_video %}
          <div class="bg-blue-50 rounded-xl p-6 mb-8">
            <h2
              class="text-lg font-semibold text-gray-900 flex items-center mb-3"
            >
              <i class="fas fa-video text-blue-600 mr-2"></i>
              Video Counseling Information
            </h2>
            <p class="text-gray-700 mb-4">
              This office offers remote video counseling sessions. Video
              sessions allow you to meet with a counselor from any location
              using your computer or smartphone.
            </p>
            <a
              href="{{ url_for('student.request_counseling_session') }}?office_id={{ office.id }}"
              class="inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm"
            >
              Schedule a Video Session
            </a>
          </div>
          {% endif %}
        </div>

        <!-- Sidebar -->
        <div class="lg:col-span-1">
          <div class="bg-gray-50 rounded-xl p-6 mb-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
              Office Staff
            </h3>

            {% if office.office_admins %}
            <ul class="space-y-3">
              {% for admin in office.office_admins %}
              <li class="flex items-center">
                <div
                  class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center mr-3"
                >
                  {% if admin.user.profile_pic %}
                  <img
                    src="{{ admin.user.profile_pic }}"
                    alt="{{ admin.user.get_full_name() }}"
                    class="h-10 w-10 rounded-full object-cover"
                  />
                  {% else %}
                  <span class="text-blue-600 font-medium text-sm">
                    {{ admin.user.first_name[0] }}{{ admin.user.last_name[0] }}
                  </span>
                  {% endif %}
                </div>
                <div>
                  <h4 class="font-medium text-gray-900">
                    {{ admin.user.get_full_name() }}
                  </h4>
                  <p class="text-xs text-gray-500">
                    {{ admin.user.role|capitalize }}
                  </p>
                </div>
              </li>
              {% endfor %}
            </ul>
            {% else %}
            <p class="text-gray-500 text-sm italic">
              No staff information available
            </p>
            {% endif %}
          </div>

          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
              Quick Actions
            </h3>
            <div class="space-y-3">
              <a
                href="{{ url_for('student.submit_inquiry', office_id=office.id) }}"
                class="block w-full py-2 px-4 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition"
              >
                <i class="fas fa-question-circle text-blue-600 mr-2"></i>
                Submit an Inquiry
              </a>

              {% if office.supports_video %}
              <a
                href="{{ url_for('student.request_counseling_session') }}?office_id={{ office.id }}"
                class="block w-full py-2 px-4 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition"
              >
                <i class="fas fa-calendar-alt text-blue-600 mr-2"></i>
                Schedule Counseling
              </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
